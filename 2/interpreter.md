.. _tut-using:

****************************
استفاده از مفسر پایتون
****************************


.. _tut-invoking:

فراخوانی مفسر
========================

مفسر پایتون معمولاً به عنوان |usr_local_bin_python_x_dot_y_literal| روی دستگاه‌هایی که در دسترس است نصب می‌شود؛ قرار دادن :file:`/usr/local/bin` در مسیر جستجوی شل یونیکس شما این امکان را می‌دهد که با تایپ کردن دستور:

.. code-block:: text

   python3.14

به شل دسترسی پیدا کنید. [#]_ از آنجا که انتخاب دایرکتوری که مفسر در آن قرار دارد یک گزینه نصب است، مکان‌های دیگری نیز ممکن است وجود داشته باشد؛ با متخصص پایتون محلی یا مدیر سیستم خود چک کنید. (به عنوان مثال، :file:`/usr/local/python` یک مکان جایگزین محبوب است.)

در دستگاه‌های ویندوزی که پایتون را از :ref:`Microsoft Store <windows-store>` نصب کرده‌اید، فرمان |python_x_dot_y_literal| در دسترس خواهد بود. اگر :ref:`py.exe launcher <launcher>` را نصب کرده‌اید، می‌توانید از فرمان :file:`py` استفاده کنید. برای روش‌های دیگر راه‌اندازی پایتون، به :ref:`setting-envvars` مراجعه کنید.

تایپ یک کاراکتر پایان فایل (:kbd:`Control-D` در یونیکس، :kbd:`Control-Z` در ویندوز) در نشانه‌گذاری اصلی باعث می‌شود مفسر با وضعیت خروجی صفر خارج شود. اگر این کار نکرد، می‌توانید با تایپ کردن فرمان زیر مفسر را ببندید: ``quit()``.

ویژگی‌های ویرایش خط مفسر شامل ویرایش تعاملی، جایگزینی تاریخچه و تکمیل کد در سیستم‌هایی است که از کتابخانه `GNU Readline <https://tiswww.case.edu/php/chet/readline/rltop.html>`_ پشتیبانی می‌کنند. شاید سریع‌ترین بررسی برای دیدن اینکه آیا ویرایش خط فرمان پشتیبانی می‌شود، تایپ :kbd:`Control-P` در اولین نشانه‌گذاری پایتون باشد که دریافت می‌کنید. اگر صدایی ایجاد کرد، شما ویرایش خط فرمان دارید؛ برای مقدمه‌ای بر کلیدها، به ضمیمه :ref:`tut-interacting` مراجعه کنید. اگر به نظر می‌رسد چیزی اتفاق نمی‌افتد، یا اگر ``^P`` تکرار می‌شود، ویرایش خط فرمان در دسترس نیست؛ شما فقط قادر خواهید بود از backspace برای حذف کاراکترها از خط فعلی استفاده کنید.

مفسر به گونه‌ای عمل می‌کند که شبیه شل یونیکس است: هنگامی که با ورودی استاندارد متصل به یک دستگاه tty فراخوانی می‌شود، به طور تعاملی دستورات را می‌خواند و اجرا می‌کند؛ هنگامی که با یک آرگومان نام فایل یا با یک فایل به عنوان ورودی استاندارد فراخوانی می‌شود، از آن فایل یک *اسکریپت* می‌خواند و اجرا می‌کند.

یک روش دوم برای شروع مفسر استفاده از ``python -c command [arg] ...`` است که بیانیه‌ها را در *command* اجرا می‌کند، مشابه گزینه :option:`-c` شل. از آنجا که عبارات پایتون اغلب شامل فضاها یا کاراکترهای دیگری هستند که به شل ویژه هستند، معمولاً توصیه می‌شود که *command* را به طور کامل در گیومه قرار دهید.

برخی از ماژول‌های پایتون همچنین به عنوان اسکریپت‌ها مفید هستند. این ماژول‌ها می‌توانند با استفاده از ``python -m module [arg] ...`` فراخوانی شوند، که فایل منبع *module* را به عنوان اگر نام کامل آن را در خط فرمان نوشته‌اید، اجرا می‌کند.

هنگامی که یک فایل اسکریپت استفاده می‌شود، گاهی اوقات مفید است که بتوانید اسکریپت را اجرا کنید و بعداً به حالت تعاملی وارد شوید. این کار با عبور از :option:`-i` قبل از اسکریپت انجام می‌شود.

تمام گزینه‌های خط فرمان در :ref:`using-on-general` توضیح داده شده‌اند.


.. _tut-argpassing:

انتقال آرگومان
----------------

زمانی که مفسر از نام اسکریپت و آرگومان‌های اضافی بعد از آن مطلع باشد، این نام به لیستی از رشته‌ها تبدیل می‌شود و به متغیر ``argv`` در ماژول ``sys`` اختصاص می‌یابد. شما می‌توانید به این لیست با اجرای ``import sys`` دسترسی پیدا کنید. طول لیست حداقل یک است؛ هنگامی که هیچ اسکریپتی و هیچ آرگومانی ارائه نشود، ``sys.argv[0]`` یک رشته خالی است. هنگامی که نام اسکریپت به صورت ``'-'`` (به معنی ورودی استاندارد) ارائه می‌شود، ``sys.argv[0]`` به ``'-'`` تنظیم می‌شود. هنگامی که :option:`-c` *command* استفاده می‌شود، ``sys.argv[0]`` به ``'-c'`` تنظیم می‌شود. هنگامی که :option:`-m` *module* استفاده می‌شود، ``sys.argv[0]`` به نام کامل ماژول یافت شده تنظیم می‌شود. گزینه‌هایی که بعد از :option:`-c` *command* یا :option:`-m` *module* پیدا می‌شوند، توسط پردازش گزینه‌های مفسر پایتون مصرف نمی‌شوند، بلکه در ``sys.argv`` باقی می‌مانند تا فرمان یا ماژول به آن‌ها رسیدگی کند.


.. _tut-interactive:

حالت تعاملی
----------------

هنگامی که دستورات از tty خوانده می‌شوند، گفته می‌شود که مفسر در *حالت تعاملی* است. در این حالت، مفسر برای فرمان بعدی با *نشانه‌گذاری اصلی*، معمولاً با سه علامت بزرگتر (``>>>``) درخواست می‌کند؛ برای خطوط ادامه‌ای با *نشانه‌گذاری ثانویه*، به طور پیش‌فرض سه نقطه (``...``) درخواست می‌کند. مفسر یک پیام خوشامدگویی چاپ می‌کند که شماره نسخه و یک اطلاعیه حق چاپ را قبل از چاپ اولین نشانه‌گذاری نشان می‌دهد:

.. code-block:: shell-session

   $ python3.14
   Python 3.14 (default, April 4 2024, 09:25:04)
   [GCC 10.2.0] on linux
   برای اطلاعات بیشتر "help"، "copyright"، "credits" یا "license" را تایپ کنید.
   >>>

.. XXX به‌روزرسانی برای نسخه‌های جدید

خطوط ادامه‌ای هنگام وارد کردن یک ساختار چند خطی لازم هستند. به عنوان مثال، به این :keyword:`if` statement نگاه کنید::

   >>> the_world_is_flat = True
   >>> if the_world_is_flat:
   ...     print("مراقب باشید که نیفتید!")
   ...
   مراقب باشید که نیفتید!


برای اطلاعات بیشتر در مورد حالت تعاملی، به :ref:`tut-interac` مراجعه کنید.


.. _tut-interp:

مفسر و محیط آن
===================================


.. _tut-source-encoding:

کدگذاری کد منبع
--------------------

به طور پیش‌فرض، فایل‌های منبع پایتون به عنوان کدگذاری شده در UTF-8 در نظر گرفته می‌شوند. در این کدگذاری، کاراکترهای اکثر زبان‌های جهان می‌توانند به طور همزمان در رشته‌های متنی، شناسه‌ها و نظرات استفاده شوند --- اگرچه کتابخانه استاندارد فقط از کاراکترهای ASCII برای شناسه‌ها استفاده می‌کند، یک کنوانسیون که هر کد قابل حملی باید از آن پیروی کند. برای نمایش صحیح تمام این کاراکترها، ویرایشگر شما باید تشخیص دهد که فایل UTF-8 است و باید از یک فونت که از تمام کاراکترهای موجود در فایل پشتیبانی می‌کند، استفاده کند.

برای اعلام یک کدگذاری غیر از کدگذاری پیش‌فرض، یک خط کامنت خاص باید به عنوان *اولین* خط فایل اضافه شود. نحو به صورت زیر است::

   # -*- coding: encoding -*-

که در آن *encoding* یکی از :mod:`codecs` های معتبر است که توسط پایتون پشتیبانی می‌شود.

به عنوان مثال، برای اعلام اینکه کدگذاری Windows-1252 باید استفاده شود، اولین خط فایل کد منبع شما باید به صورت زیر باشد::

   # -*- coding: cp1252 -*-

یک استثنا برای قانون *اولین خط* این است که زمانی که کد منبع با یک :ref:`UNIX "shebang" line <tut-scripts>` آغاز می‌شود. در این صورت، اعلام کدگذاری باید به عنوان دومین خط فایل اضافه شود. به عنوان مثال::

   #!/usr/bin/env python3
   # -*- coding: cp1252 -*-

.. rubric:: پاورقی

.. [#] در یونیکس، مفسر پایتون 3.x به طور پیش‌فرض با نام اجرایی ``python`` نصب نمی‌شود، بنابراین با نام اجرایی پایتون 2.x که به طور همزمان نصب شده است، تداخل نداشته باشد.
